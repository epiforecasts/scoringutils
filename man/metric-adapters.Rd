% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/metric-adapters.R
\name{metric-adapters}
\alias{metric-adapters}
\alias{metric_adapt_binary_numeric}
\alias{metric_adapt_swap_args}
\title{Adapt external metrics for use with scoringutils}
\usage{
metric_adapt_binary_numeric(fun)

metric_adapt_swap_args(fun)
}
\arguments{
\item{fun}{A function to wrap. For \code{metric_adapt_binary_numeric()},
\code{fun} should expect numeric \code{observed} (0/1) as its first argument.
For \code{metric_adapt_swap_args()}, \code{fun} should expect \code{predicted} as its
first argument and \code{observed} as its second.}
}
\value{
A function with formals \verb{(observed, predicted, ...)} that can be
used as a metric in \code{\link[=score]{score()}}.
}
\description{
These adapter functions wrap external scoring functions so they can be
used with \code{\link[=score]{score()}}. They handle common incompatibilities between
scoringutils' calling conventions and those of external packages.
\itemize{
\item \code{metric_adapt_binary_numeric()} wraps a metric that expects numeric
0/1 \code{observed} values, converting the factor input that scoringutils
uses for binary forecasts.
\item \code{metric_adapt_swap_args()} wraps a metric that takes
\verb{function(predicted, observed)} instead of the
\verb{function(observed, predicted)} convention used by scoringutils.
}

The returned functions can be passed directly to \code{\link[=score]{score()}} via the
\code{metrics} argument, and are compatible with \code{\link[purrr:partial]{purrr::partial()}} for
further customization.
}
\examples{
# Wrap a metric that expects numeric 0/1 observed values
numeric_brier <- function(observed, predicted) {
  (observed - predicted)^2
}
adapted_brier <- metric_adapt_binary_numeric(numeric_brier)

# Use inside score()
score(example_binary,
      metrics = list(custom_brier = adapted_brier))

# Wrap a metric that takes (predicted, observed) order
swapped_ae <- function(predicted, observed) {
  abs(predicted - observed)
}
adapted_ae <- metric_adapt_swap_args(swapped_ae)
score(example_point,
      metrics = list(custom_ae = adapted_ae))
}
\keyword{handle-metrics}
