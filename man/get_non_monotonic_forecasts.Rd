% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/get-non-monotonic-forecasts.R
\name{get_non_monotonic_forecasts}
\alias{get_non_monotonic_forecasts}
\title{Find non-monotonic quantile predictions}
\usage{
get_non_monotonic_forecasts(data, forecast_unit = NULL, counts = FALSE)
}
\arguments{
\item{data}{A data.frame (or similar) with predicted and observed values.
See the details section of for additional information
on the required input format.}

\item{forecast_unit}{(optional) Name of the columns in \code{data} (after
any renaming of columns) that denote the unit of a
single forecast. See \code{\link[=get_forecast_unit]{get_forecast_unit()}} for details.
If \code{NULL} (the default), all columns that are not required columns are
assumed to form the unit of a single forecast. If specified, all columns
that are not part of the forecast unit (or required columns) will be removed.}

\item{counts}{Should the output show the number of quantile rows per
affected forecast unit instead of the individual rows? Default is \code{FALSE}.}
}
\value{
A data.table with all rows for which a non-monotonic prediction
was found
}
\description{
Identifies forecast units where predicted values are not monotonically
non-decreasing with increasing quantile levels. This is a diagnostic helper
function modeled on \code{\link[=get_duplicate_forecasts]{get_duplicate_forecasts()}}.

Quantile forecasts should have non-decreasing predictions as quantile levels
increase (e.g., the predicted value at the 0.75 quantile should be at least
as large as the predicted value at the 0.5 quantile). Violations indicate
a problem with the forecasting method.
}
\examples{
# well-formed data returns 0 rows
get_non_monotonic_forecasts(example_quantile)

# non-monotonic data
bad_data <- data.frame(
  model = "m1", date = as.Date("2020-01-01"), observed = 5,
  quantile_level = c(0.25, 0.5, 0.75), predicted = c(3, 7, 4)
)
get_non_monotonic_forecasts(bad_data)
}
\keyword{diagnose-inputs}
