<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Set unit of a single forecast manually — set_forecast_unit • scoringutils</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Set unit of a single forecast manually — set_forecast_unit"><meta name="description" content="Helper function to set the unit of a single forecast (i.e. the
combination of columns that uniquely define a single forecast) manually.
This simple function keeps the columns specified in forecast_unit (plus
additional protected columns, e.g. for observed values, predictions or
quantile levels) and removes duplicate rows. set_forecast_unit() will
mainly be called when constructing a forecast object (see as_forecast())
via the forecast_unit argument there.
If not done explicitly, scoringutils attempts to determine the unit
of a single forecast automatically by simply assuming that all column names
are relevant to determine the forecast unit. This may lead to unexpected
behaviour, so setting the forecast unit explicitly can help make the code
easier to debug and easier to read."><meta property="og:description" content="Helper function to set the unit of a single forecast (i.e. the
combination of columns that uniquely define a single forecast) manually.
This simple function keeps the columns specified in forecast_unit (plus
additional protected columns, e.g. for observed values, predictions or
quantile levels) and removes duplicate rows. set_forecast_unit() will
mainly be called when constructing a forecast object (see as_forecast())
via the forecast_unit argument there.
If not done explicitly, scoringutils attempts to determine the unit
of a single forecast automatically by simply assuming that all column names
are relevant to determine the forecast unit. This may lead to unexpected
behaviour, so setting the forecast unit explicitly can help make the code
easier to debug and easier to read."><meta name="robots" content="noindex"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">scoringutils</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.2.2.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://raw.githubusercontent.com/epiforecasts/scoringutils/main/inst/manuscript/manuscript.pdf">scoringutils paper</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Deprecated-functions.html">Deprecated functions</a></li>
    <li><a class="dropdown-item" href="../articles/Deprecated-visualisations.html">Deprecated Visualisations</a></li>
    <li><a class="dropdown-item" href="../articles/scoring-rules.html">Scoring rules in `scoringutils`</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/epiforecasts/scoringutils/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Set unit of a single forecast manually</h1>
      <small class="dont-index">Source: <a href="https://github.com/epiforecasts/scoringutils/blob/main/R/forecast-unit.R" class="external-link"><code>R/forecast-unit.R</code></a></small>
      <div class="d-none name"><code>set_forecast_unit.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Helper function to set the unit of a single forecast (i.e. the
combination of columns that uniquely define a single forecast) manually.
This simple function keeps the columns specified in <code>forecast_unit</code> (plus
additional protected columns, e.g. for observed values, predictions or
quantile levels) and removes duplicate rows. <code>set_forecast_unit()</code> will
mainly be called when constructing a <code>forecast</code> object (see <code><a href="as_forecast.html">as_forecast()</a></code>)
via the <code>forecast_unit</code> argument there.</p>
<p>If not done explicitly, <code>scoringutils</code> attempts to determine the unit
of a single forecast automatically by simply assuming that all column names
are relevant to determine the forecast unit. This may lead to unexpected
behaviour, so setting the forecast unit explicitly can help make the code
easier to debug and easier to read.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">set_forecast_unit</span><span class="op">(</span><span class="va">data</span>, <span class="va">forecast_unit</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A data.frame (or similar) with predicted and observed values.
See the details section of <code><a href="as_forecast.html">as_forecast()</a></code> for additional information
on required input formats.</p></dd>


<dt id="arg-forecast-unit">forecast_unit<a class="anchor" aria-label="anchor" href="#arg-forecast-unit"></a></dt>
<dd><p>Character vector with the names of the columns that
uniquely identify a single forecast.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A data.table with only those columns kept that are relevant to
scoring or denote the unit of a single forecast as specified by the user.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org" class="external-link">magrittr</a></span><span class="op">)</span> <span class="co"># pipe operator</span></span></span>
<span class="r-in"><span><span class="va">example_quantile</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">scoringutils</span><span class="fu">:::</span><span class="fu">set_forecast_unit</span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"location"</span>, <span class="st">"target_end_date"</span>, <span class="st">"target_type"</span>, <span class="st">"horizon"</span>, <span class="st">"model"</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #0000BB;">Forecast type: </span>quantile</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #0000BB;">Forecast unit:</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> location, target_end_date, target_type, horizon, and model</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Key: &lt;location, target_end_date, target_type&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        observed quantile_level predicted location target_end_date target_type</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           &lt;num&gt;          &lt;num&gt;     &lt;int&gt;   &lt;char&gt;          &lt;Date&gt;      &lt;char&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     1:   127300             NA        NA       DE      2021-01-02       Cases</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     2:     4534             NA        NA       DE      2021-01-02      Deaths</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     3:   154922             NA        NA       DE      2021-01-09       Cases</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     4:     6117             NA        NA       DE      2021-01-09      Deaths</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     5:   110183             NA        NA       DE      2021-01-16       Cases</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    ---                                                                       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20541:       78          0.850       352       IT      2021-07-24      Deaths</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20542:       78          0.900       397       IT      2021-07-24      Deaths</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20543:       78          0.950       499       IT      2021-07-24      Deaths</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20544:       78          0.975       611       IT      2021-07-24      Deaths</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20545:       78          0.990       719       IT      2021-07-24      Deaths</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        horizon                model</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          &lt;num&gt;               &lt;char&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     1:      NA                 &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     2:      NA                 &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     3:      NA                 &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     4:      NA                 &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     5:      NA                 &lt;NA&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    ---                             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20541:       2 epiforecasts-EpiNow2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20542:       2 epiforecasts-EpiNow2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20543:       2 epiforecasts-EpiNow2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20544:       2 epiforecasts-EpiNow2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20545:       2 epiforecasts-EpiNow2</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://followtheargument.org/" class="external-link">Nikos Bosse</a>, <a href="https://www.samabbott.co.uk/" class="external-link">Sam Abbott</a>, Hugo Gruson, Sebastian Funk.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.9000.</p>
</div>

    </footer></div>





  </body></html>

