<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Customises a metric function with additional arguments. — customise_metric • scoringutils</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Customises a metric function with additional arguments. — customise_metric"><meta name="description" content="This function takes a metric function and additional arguments, and returns
a new function that includes the additional arguments when calling the
original metric function.
This is the expected way to pass additional
arguments to a metric when evaluating a forecast using score():
To evaluate a forecast using a metric with an additional argument, you need
to create a custom version of the scoring function with the argument
included. You then need to create an updated version of the list of scoring
functions that includes your customised metric and pass this to score()."><meta property="og:description" content="This function takes a metric function and additional arguments, and returns
a new function that includes the additional arguments when calling the
original metric function.
This is the expected way to pass additional
arguments to a metric when evaluating a forecast using score():
To evaluate a forecast using a metric with an additional argument, you need
to create a custom version of the scoring function with the argument
included. You then need to create an updated version of the list of scoring
functions that includes your customised metric and pass this to score()."><meta name="robots" content="noindex"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">
    <a class="navbar-brand me-2" href="../index.html">scoringutils</a>
    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">1.2.2.9000</small>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://raw.githubusercontent.com/epiforecasts/scoringutils/main/inst/manuscript/manuscript.pdf">scoringutils paper</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Deprecated-functions.html">Deprecated functions</a></li>
    <li><a class="dropdown-item" href="../articles/Deprecated-visualisations.html">Deprecated Visualisations</a></li>
    <li><a class="dropdown-item" href="../articles/scoring-rules.html">Scoring rules in `scoringutils`</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/epiforecasts/scoringutils/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <h1>Customises a metric function with additional arguments.</h1>
      <small class="dont-index">Source: <a href="https://github.com/epiforecasts/scoringutils/blob/HEAD/R/default-scoring-rules.R" class="external-link"><code>R/default-scoring-rules.R</code></a></small>
      <div class="d-none name"><code>customise_metric.Rd</code></div>
    </div>
    <div class="ref-description section level2">
    <p>This function takes a metric function and additional arguments, and returns
a new function that includes the additional arguments when calling the
original metric function.</p>
<p>This is the expected way to pass additional
arguments to a metric when evaluating a forecast using <code><a href="score.html">score()</a></code>:
To evaluate a forecast using a metric with an additional argument, you need
to create a custom version of the scoring function with the argument
included. You then need to create an updated version of the list of scoring
functions that includes your customised metric and pass this to <code><a href="score.html">score()</a></code>.</p>
    </div>
    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">customise_metric</span><span class="op">(</span><span class="va">metric</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">customize_metric</span><span class="op">(</span><span class="va">metric</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>
    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt id="arg-metric">metric<a class="anchor" aria-label="anchor" href="#arg-metric"></a></dt>
<dd><p>The metric function to be customised.</p></dd>
<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments to be included when calling the metric
function.</p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
<p>A customised metric function.</p>
    </div>
    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Create a customised metric function</span></span></span>
<span class="r-in"><span><span class="va">custom_metric</span> <span class="op">&lt;-</span> <span class="fu">customise_metric</span><span class="op">(</span><span class="va">mean</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Use the customised metric function</span></span></span>
<span class="r-in"><span><span class="va">values</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="cn">NA</span>, <span class="fl">4</span>, <span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">custom_metric</span><span class="op">(</span><span class="va">values</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 3</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Updating metrics list to calculate 70% coverage in `score()`</span></span></span>
<span class="r-in"><span><span class="va">interval_coverage_70</span> <span class="op">&lt;-</span> <span class="fu">customise_metric</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">interval_coverage</span>, interval_range <span class="op">=</span> <span class="fl">70</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">updated_metrics</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="metrics_quantile.html">metrics_quantile</a></span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  <span class="st">"interval_coverage_70"</span> <span class="op">=</span> <span class="va">interval_coverage_70</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="score.html">score</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="as_forecast.html">as_forecast</a></span><span class="op">(</span><span class="va">example_quantile</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  metrics <span class="op">=</span> <span class="va">updated_metrics</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Some rows containing NA values may be removed. This is fine if not</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   unexpected.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      location target_end_date target_type location_name forecast_date</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        &lt;char&gt;          &lt;Date&gt;      &lt;char&gt;        &lt;char&gt;        &lt;Date&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1:       DE      2021-05-08       Cases       Germany    2021-05-03</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   2:       DE      2021-05-08       Cases       Germany    2021-05-03</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   3:       DE      2021-05-08       Cases       Germany    2021-05-03</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   4:       DE      2021-05-08      Deaths       Germany    2021-05-03</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   5:       DE      2021-05-08      Deaths       Germany    2021-05-03</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ---                                                                 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 883:       IT      2021-07-24      Deaths         Italy    2021-07-12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 884:       IT      2021-07-24      Deaths         Italy    2021-07-05</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 885:       IT      2021-07-24      Deaths         Italy    2021-07-12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 886:       IT      2021-07-24      Deaths         Italy    2021-07-05</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 887:       IT      2021-07-24      Deaths         Italy    2021-07-12</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                      model horizon          wis overprediction underprediction</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     &lt;char&gt;   &lt;num&gt;        &lt;num&gt;          &lt;num&gt;           &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1: EuroCOVIDhub-ensemble       1  7990.854783   2.549870e+03       0.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   2: EuroCOVIDhub-baseline       1 16925.046957   1.527583e+04       0.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   3:  epiforecasts-EpiNow2       1 25395.960870   1.722226e+04       0.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   4: EuroCOVIDhub-ensemble       1    53.880000   0.000000e+00       0.6086957</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   5: EuroCOVIDhub-baseline       1    46.793043   2.130435e+00       0.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ---                                                                          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 883: EuroCOVIDhub-baseline       2    80.336957   3.608696e+00       0.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 884:       UMass-MechBayes       3     4.881739   4.347826e-02       0.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 885:       UMass-MechBayes       2    25.581739   1.782609e+01       0.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 886:  epiforecasts-EpiNow2       3    19.762609   5.478261e+00       0.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 887:  epiforecasts-EpiNow2       2    66.161739   4.060870e+01       0.0000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       dispersion  bias interval_coverage_50 interval_coverage_90</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            &lt;num&gt; &lt;num&gt;               &lt;lgcl&gt;               &lt;lgcl&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1: 5440.985217  0.50                 TRUE                 TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   2: 1649.220870  0.95                FALSE                FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   3: 8173.700000  0.90                FALSE                 TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   4:   53.271304 -0.10                 TRUE                 TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   5:   44.662609  0.30                 TRUE                 TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ---                                                            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 883:   76.728261  0.20                 TRUE                 TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 884:    4.838261  0.10                 TRUE                 TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 885:    7.755652  0.80                FALSE                 TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 886:   14.284348  0.50                 TRUE                 TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 887:   25.553043  0.90                FALSE                 TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      interval_coverage_deviation ae_median interval_coverage_70</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                            &lt;num&gt;     &lt;num&gt;               &lt;lgcl&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   1:                  0.05181818     12271                 TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   2:                 -0.40272727     25620                FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   3:                 -0.31181818     44192                FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   4:                  0.41545455        14                 TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   5:                  0.23363636        15                 TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  ---                                                           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 883:                  0.32454545        53                 TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 884:                  0.41545455         1                 TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 885:                 -0.22090909        46                FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 886:                  0.05181818        26                 TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 887:                 -0.31181818       108                FALSE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>
    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://followtheargument.org/" class="external-link">Nikos Bosse</a>, <a href="https://www.samabbott.co.uk/" class="external-link">Sam Abbott</a>, Hugo Gruson, Sebastian Funk.</p>
</div>
<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.9000.</p>
</div>
    </footer></div>
  </body></html>

