<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>(Continuous) ranked probability score — crps_sample • scoringutils</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="(Continuous) ranked probability score — crps_sample"><meta name="description" content='Wrapper around the crps_sample()
function from the
scoringRules package. Can be used for continuous as well as integer
valued forecasts
The Continuous ranked probability score (CRPS) can be interpreted as the sum
of three components: overprediction,  underprediction and dispersion.
"Dispersion" is defined as the CRPS of the median forecast $m$. If an
observation $y$ is greater than $m$ then overprediction is defined as the
CRPS of the forecast for $y$ minus the dispersion component, and
underprediction is zero. If, on the other hand, $y&amp;lt;m$ then underprediction
is defined as the CRPS of the forecast for $y$ minus the dispersion
component, and overprediction is zero.
The overprediction, underprediction and dispersion components correspond to
those of the wis().'><meta property="og:description" content='Wrapper around the crps_sample()
function from the
scoringRules package. Can be used for continuous as well as integer
valued forecasts
The Continuous ranked probability score (CRPS) can be interpreted as the sum
of three components: overprediction,  underprediction and dispersion.
"Dispersion" is defined as the CRPS of the median forecast $m$. If an
observation $y$ is greater than $m$ then overprediction is defined as the
CRPS of the forecast for $y$ minus the dispersion component, and
underprediction is zero. If, on the other hand, $y&amp;lt;m$ then underprediction
is defined as the CRPS of the forecast for $y$ minus the dispersion
component, and overprediction is zero.
The overprediction, underprediction and dispersion components correspond to
those of the wis().'><meta property="og:image" content="https://epiforecasts.io/scoringutils/logo.png"><meta name="robots" content="noindex"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">scoringutils</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">2.1.2.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://raw.githubusercontent.com/epiforecasts/scoringutils/main/inst/manuscript/manuscript.pdf">scoringutils paper</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Deprecated-functions.html">Deprecated functions</a></li>
    <li><a class="dropdown-item" href="../articles/Deprecated-visualisations.html">Deprecated Visualisations</a></li>
    <li><a class="dropdown-item" href="../articles/scoring-multivariate-forecasts.html">Scoring multivariate forecasts</a></li>
    <li><a class="dropdown-item" href="../articles/scoring-rules.html">Scoring rules in `scoringutils`</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/epiforecasts/scoringutils/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>(Continuous) ranked probability score</h1>
      <small class="dont-index">Source: <a href="https://github.com/epiforecasts/scoringutils/blob/main/R/metrics-sample.R" class="external-link"><code>R/metrics-sample.R</code></a></small>
      <div class="d-none name"><code>crps_sample.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Wrapper around the <code><a href="https://rdrr.io/pkg/scoringRules/man/scores_sample_univ.html" class="external-link">crps_sample()</a></code>
function from the
<span class="pkg">scoringRules</span> package. Can be used for continuous as well as integer
valued forecasts</p>
<p>The Continuous ranked probability score (CRPS) can be interpreted as the sum
of three components: overprediction,  underprediction and dispersion.
"Dispersion" is defined as the CRPS of the median forecast $m$. If an
observation $y$ is greater than $m$ then overprediction is defined as the
CRPS of the forecast for $y$ minus the dispersion component, and
underprediction is zero. If, on the other hand, $y&lt;m$ then underprediction
is defined as the CRPS of the forecast for $y$ minus the dispersion
component, and overprediction is zero.</p>
<p>The overprediction, underprediction and dispersion components correspond to
those of the <code><a href="wis.html">wis()</a></code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">crps_sample</span><span class="op">(</span><span class="va">observed</span>, <span class="va">predicted</span>, separate_results <span class="op">=</span> <span class="cn">FALSE</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">dispersion_sample</span><span class="op">(</span><span class="va">observed</span>, <span class="va">predicted</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">overprediction_sample</span><span class="op">(</span><span class="va">observed</span>, <span class="va">predicted</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">underprediction_sample</span><span class="op">(</span><span class="va">observed</span>, <span class="va">predicted</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-observed">observed<a class="anchor" aria-label="anchor" href="#arg-observed"></a></dt>
<dd><p>A vector with observed values of size n</p></dd>


<dt id="arg-predicted">predicted<a class="anchor" aria-label="anchor" href="#arg-predicted"></a></dt>
<dd><p>nxN matrix of predictive samples, n (number of rows) being
the number of data points and N (number of columns) the number of Monte
Carlo samples. Alternatively, if n = 1, <code>predicted</code> can just be a vector
of size n.</p></dd>


<dt id="arg-separate-results">separate_results<a class="anchor" aria-label="anchor" href="#arg-separate-results"></a></dt>
<dd><p>Logical. If <code>TRUE</code> (default is <code>FALSE</code>), then the
separate parts of the CRPS (dispersion penalty, penalties for
over- and under-prediction) get returned as separate elements of a list.
If you want a <code>data.frame</code> instead, simply call <code><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame()</a></code> on the
output.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments passed on to <code>crps_sample()</code> from functions
<code>overprediction_sample()</code>, <code>underprediction_sample()</code> and
<code>dispersion_sample()</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Vector with scores.</p>
<p><code>dispersion_sample()</code>: a numeric vector with dispersion values (one per
observation).</p>
<p><code>overprediction_sample()</code>: a numeric vector with overprediction values
(one per observation).</p>
<p><code>underprediction_sample()</code>: a numeric vector with underprediction values (one per
observation).</p>
    </div>
    <div class="section level2">
    <h2 id="input-format">Input format<a class="anchor" aria-label="anchor" href="#input-format"></a></h2>
    <p></p><div style="text-align: left">
  <img src="figures/metrics-sample.png" style="width:750px;max-width:100%;"></div><p>
  Overview of required input format for sample-based forecasts</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Alexander Jordan, Fabian Krüger, Sebastian Lerch, Evaluating Probabilistic
Forecasts with scoringRules, <a href="https://www.jstatsoft.org/article/view/v090i12" class="external-link">https://www.jstatsoft.org/article/view/v090i12</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">observed</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/Poisson.html" class="external-link">rpois</a></span><span class="op">(</span><span class="fl">30</span>, lambda <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">30</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">predicted</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">replicate</a></span><span class="op">(</span><span class="fl">200</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Poisson.html" class="external-link">rpois</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">30</span>, lambda <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">30</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">crps_sample</span><span class="op">(</span><span class="va">observed</span>, <span class="va">predicted</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] 0.397425 0.317700 1.115950 0.646575 1.945725 1.154800 0.596975 1.328250</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9] 3.501850 1.136050 4.131775 4.132275 1.537200 0.873850 3.019275 0.988200</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [17] 2.479175 1.415625 1.809875 2.786350 1.063300 1.138375 2.396075 2.989700</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [25] 1.977950 1.525400 2.511375 1.938875 3.006150 3.177950</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://followtheargument.org/" class="external-link">Nikos Bosse</a>, <a href="https://www.samabbott.co.uk/" class="external-link">Sam Abbott</a>, Hugo Gruson, Sebastian Funk.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.9000.</p>
</div>

    </footer></div>





  </body></html>

