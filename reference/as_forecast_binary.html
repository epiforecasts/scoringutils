<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-GB"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Create a forecast object for binary forecasts — as_forecast_binary • scoringutils</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create a forecast object for binary forecasts — as_forecast_binary"><meta name="description" content='Process and validate a data.frame (or similar) or similar with forecasts
and observations. If the input passes all input checks, those functions will
be converted to a forecast object. A forecast object is a data.table with
a class forecast and an additional class that depends on the forecast type.
The arguments observed, predicted, etc. make it possible to rename
existing columns of the input data to match the required columns for a
forecast object. Using the argument forecast_unit, you can specify
the columns that uniquely identify a single forecast (and thereby removing
other, unneeded columns. See section "Forecast Unit" below for details).'><meta property="og:description" content='Process and validate a data.frame (or similar) or similar with forecasts
and observations. If the input passes all input checks, those functions will
be converted to a forecast object. A forecast object is a data.table with
a class forecast and an additional class that depends on the forecast type.
The arguments observed, predicted, etc. make it possible to rename
existing columns of the input data to match the required columns for a
forecast object. Using the argument forecast_unit, you can specify
the columns that uniquely identify a single forecast (and thereby removing
other, unneeded columns. See section "Forecast Unit" below for details).'></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">scoringutils</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">2.1.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://raw.githubusercontent.com/epiforecasts/scoringutils/main/inst/manuscript/manuscript.pdf">scoringutils paper</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Deprecated-functions.html">Deprecated functions</a></li>
    <li><a class="dropdown-item" href="../articles/Deprecated-visualisations.html">Deprecated Visualisations</a></li>
    <li><a class="dropdown-item" href="../articles/scoring-rules.html">Scoring rules in `scoringutils`</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/epiforecasts/scoringutils/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Create a <code>forecast</code> object for binary forecasts</h1>
      <small class="dont-index">Source: <a href="https://github.com/epiforecasts/scoringutils/blob/v2.1.1/R/class-forecast-binary.R" class="external-link"><code>R/class-forecast-binary.R</code></a></small>
      <div class="d-none name"><code>as_forecast_binary.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Process and validate a data.frame (or similar) or similar with forecasts
and observations. If the input passes all input checks, those functions will
be converted to a <code>forecast</code> object. A forecast object is a <code>data.table</code> with
a class <code>forecast</code> and an additional class that depends on the forecast type.</p>
<p>The arguments <code>observed</code>, <code>predicted</code>, etc. make it possible to rename
existing columns of the input data to match the required columns for a
forecast object. Using the argument <code>forecast_unit</code>, you can specify
the columns that uniquely identify a single forecast (and thereby removing
other, unneeded columns. See section "Forecast Unit" below for details).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">as_forecast_binary</span><span class="op">(</span><span class="va">data</span>, <span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Default S3 method</span></span>
<span><span class="fu">as_forecast_binary</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  forecast_unit <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  observed <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  predicted <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>A data.frame (or similar) with predicted and observed values.
See the details section of for additional information
on the required input format.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Unused</p></dd>


<dt id="arg-forecast-unit">forecast_unit<a class="anchor" aria-label="anchor" href="#arg-forecast-unit"></a></dt>
<dd><p>(optional) Name of the columns in <code>data</code> (after
any renaming of columns) that denote the unit of a
single forecast. See <code><a href="get_forecast_unit.html">get_forecast_unit()</a></code> for details.
If <code>NULL</code> (the default), all columns that are not required columns are
assumed to form the unit of a single forecast. If specified, all columns
that are not part of the forecast unit (or required columns) will be removed.</p></dd>


<dt id="arg-observed">observed<a class="anchor" aria-label="anchor" href="#arg-observed"></a></dt>
<dd><p>(optional) Name of the column in <code>data</code> that contains the
observed values. This column will be renamed to "observed".</p></dd>


<dt id="arg-predicted">predicted<a class="anchor" aria-label="anchor" href="#arg-predicted"></a></dt>
<dd><p>(optional) Name of the column in <code>data</code> that contains the
predicted values. This column will be renamed to "predicted".</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>forecast</code> object of class <code>forecast_binary</code></p>
    </div>
    <div class="section level2">
    <h2 id="required-input">Required input<a class="anchor" aria-label="anchor" href="#required-input"></a></h2>
    <p>The input needs to be a data.frame or similar with the following columns:</p><ul><li><p><code>observed</code>: <code>factor</code> with exactly two levels representing the observed
values. The highest factor level is assumed to be the reference level.
This means that corresponding value in <code>predicted</code> represent the
probability that the observed value is equal to the highest factor level.</p></li>
<li><p><code>predicted</code>: <code>numeric</code> with predicted probabilities, representing
the probability that the corresponding value in <code>observed</code> is equal to
the highest available factor level.</p></li>
</ul><p>For convenience, we recommend an additional column <code>model</code> holding the name
of the forecaster or model that produced a prediction, but this is not
strictly necessary.</p>
<p>See the <a href="example_binary.html">example_binary</a> data set for an example.</p>
    </div>
    <div class="section level2">
    <h2 id="forecast-unit">Forecast unit<a class="anchor" aria-label="anchor" href="#forecast-unit"></a></h2>
    <p>In order to score forecasts, <code>scoringutils</code> needs to know which of the rows
of the data belong together and jointly form a single forecasts. This is
easy e.g. for point forecast, where there is one row per forecast. For
quantile or sample-based forecasts, however, there are multiple rows that
belong to a single forecast.</p>
<p>The <em>forecast unit</em> or <em>unit of a single forecast</em> is then described by the
combination of columns that uniquely identify a single forecast.
For example, we could have forecasts made by different models in various
locations at different time points, each for several weeks into the future.
The forecast unit could then be described as
<code>forecast_unit = c("model", "location", "forecast_date", "forecast_horizon")</code>.
<code>scoringutils</code> automatically tries to determine the unit of a single
forecast. It uses all existing columns for this, which means that no columns
must be present that are unrelated to the forecast unit. As a very simplistic
example, if you had an additional row, "even", that is one if the row number
is even and zero otherwise, then this would mess up scoring as <code>scoringutils</code>
then thinks that this column was relevant in defining the forecast unit.</p>
<p>In order to avoid issues, we recommend setting the forecast unit explicitly,
using the <code>forecast_unit</code> argument. This will simply drop unneeded columns,
while making sure that all necessary, 'protected columns' like "predicted"
or "observed" are retained.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other functions to create forecast objects:
<code><a href="as_forecast_nominal.html">as_forecast_nominal</a>()</code>,
<code><a href="as_forecast_ordinal.html">as_forecast_ordinal</a>()</code>,
<code><a href="as_forecast_point.html">as_forecast_point</a>()</code>,
<code><a href="as_forecast_quantile.html">as_forecast_quantile</a>()</code>,
<code><a href="as_forecast_sample.html">as_forecast_sample</a>()</code></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu">as_forecast_binary</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">example_binary</span>,</span></span>
<span class="r-in"><span>  predicted <span class="op">=</span> <span class="st">"predicted"</span>,</span></span>
<span class="r-in"><span>  forecast_unit <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"model"</span>, <span class="st">"target_type"</span>, <span class="st">"target_end_date"</span>,</span></span>
<span class="r-in"><span>                    <span class="st">"horizon"</span>, <span class="st">"location"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> Some rows containing NA values may be removed. This is fine if not</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>   unexpected.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #0000BB;">Forecast type: </span>binary</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #0000BB;">Forecast unit:</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> model, target_type, target_end_date, horizon, and location</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       predicted observed                 model target_type target_end_date</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           &lt;num&gt;   &lt;fctr&gt;                &lt;char&gt;      &lt;char&gt;          &lt;Date&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    1:        NA     &lt;NA&gt;                  &lt;NA&gt;       Cases      2021-01-02</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    2:        NA     &lt;NA&gt;                  &lt;NA&gt;      Deaths      2021-01-02</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    3:        NA     &lt;NA&gt;                  &lt;NA&gt;       Cases      2021-01-09</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    4:        NA     &lt;NA&gt;                  &lt;NA&gt;      Deaths      2021-01-09</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    5:        NA     &lt;NA&gt;                  &lt;NA&gt;       Cases      2021-01-16</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ---                                                                     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1027:     0.250        0 EuroCOVIDhub-baseline      Deaths      2021-07-24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1028:     0.475        0       UMass-MechBayes      Deaths      2021-07-24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1029:     0.450        0       UMass-MechBayes      Deaths      2021-07-24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1030:     0.375        0  epiforecasts-EpiNow2      Deaths      2021-07-24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1031:     0.300        0  epiforecasts-EpiNow2      Deaths      2021-07-24</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       horizon location</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         &lt;num&gt;   &lt;char&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    1:      NA       DE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    2:      NA       DE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    3:      NA       DE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    4:      NA       DE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    5:      NA       DE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ---                 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1027:       2       IT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1028:       3       IT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1029:       2       IT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1030:       3       IT</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1031:       2       IT</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://followtheargument.org/" class="external-link">Nikos Bosse</a>, <a href="https://www.samabbott.co.uk/" class="external-link">Sam Abbott</a>, Hugo Gruson, Sebastian Funk.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.9000.</p>
</div>

    </footer></div>





  </body></html>

